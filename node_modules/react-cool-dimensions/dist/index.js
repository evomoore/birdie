"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function r(){return(r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var t="ðŸ’¡ react-cool-dimensions: the browser doesn't support Resize Observer, please use polyfill: https://github.com/wellyshen/react-cool-dimensions#resizeobserver-polyfill",n="ðŸ’¡ react-cool-dimensions: the browser doesn't support border-box size, fallback to content-box size. Please see: https://github.com/wellyshen/react-cool-dimensions#border-box-size-measurement";exports.borderBoxWarn=n,exports.default=function(o){var i=void 0===o?{}:o,u=i.ref,c=i.useBorderBoxSize,s=void 0!==c&&c,l=i.breakpoints,a=i.onResize,f=i.polyfill,b=e.useState({currentBreakpoint:"",width:0,height:0}),h=b[0],p=b[1],d=e.useRef({}),v=e.useRef(),w=e.useRef(!1),y=e.useRef(null),z=e.useRef(null),k=e.useRef(!1),R=e.useRef(null),B=u||R;e.useEffect((function(){a&&(z.current=a)}),[a]);var g=e.useCallback((function(){!w.current&&y.current&&(y.current.observe(B.current),w.current=!0)}),[B]),x=e.useCallback((function(){w.current&&y.current&&(y.current.disconnect(),w.current=!1)}),[]);return e.useEffect((function(){return B.current?"ResizeObserver"in window&&"ResizeObserverEntry"in window||f?(y.current=new(window.ResizeObserver||f)((function(e){var r=e[0],t=r.contentBoxSize,o=r.borderBoxSize,i=r.contentRect,u=t;s&&(o?u=o:k.current||(console.warn(n),k.current=!0));var c=(u=Array.isArray(u)?u[0]:u)?u.inlineSize:i.width,a=u?u.blockSize:i.height;if(c!==d.current.width||a!==d.current.height){d.current={width:c,height:a};var f,b,h,w,y={currentBreakpoint:"",width:c,height:a,entry:r,observe:g,unobserve:x};l?(y.currentBreakpoint=(f=l,b=c,h="",w=-1,Object.keys(f).forEach((function(e){var r=f[e];b>=r&&r>w&&(h=e,w=r)})),h),y.currentBreakpoint!==v.current&&(z.current&&z.current(y),v.current=y.currentBreakpoint)):z.current&&z.current(y),p({currentBreakpoint:y.currentBreakpoint,width:c,height:a,entry:r})}})),g(),function(){x()}):(console.error(t),function(){return null}):function(){return null}}),[B,JSON.stringify(l),g,x]),r({ref:B},h,{observe:g,unobserve:x})},exports.observerErr=t;
